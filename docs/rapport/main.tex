\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}
\usepackage[T1]{fontenc}

\usepackage[toc,page]{appendix}
%fonts pour les math
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{dsfont}
%couleur dans le doc
\usepackage[dvipsnames]{xcolor}

%affichage lignes de code
\usepackage{listings}
\usepackage{textcomp}
\lstset{
	tabsize=2,
	language=python,
        basicstyle=\scriptsize,
        upquote=true,
        aboveskip={0.2\baselineskip},
        columns=fixed,
        showstringspaces=false,
        extendedchars=true,
        breaklines=true,
        prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
        frame=single,
        showtabs=false,
        showspaces=false,
        showstringspaces=false,
        identifierstyle=\ttfamily,
        keywordstyle=\color[rgb]{0,0,1},
        commentstyle=\color[rgb]{0.133,0.545,0.133},
        stringstyle=\color[rgb]{0.627,0.126,0.941},
}

%\usepackage{lastpage}
%pour les images
	\usepackage[dvips, pdftex]{graphicx}
	\usepackage[section]{placeins}
	\usepackage{here}	
	\usepackage{float}

%définition du titre du document
 \newcommand{\titleinfo}{INF441-NET - NetProbes} 

%formattage de la page
	\usepackage{geometry}
	\geometry{top=2cm, bottom=2cm, left=2cm, right=2cm}
	%fomattage de l'entête et du pied de page
	\usepackage{fancyhdr}
	\pagestyle{fancy}
		\setlength{\headheight}{15.2pt}
		\lhead{\titleinfo}
		\rhead{\leftmark}
	%Page de garde avec style vide
	\thispagestyle{empty}	
	

%formattage du titre des sections
	%\usepackage{titlesec}
	%\titleformat{\section}[runin]{\normalfont\bfseries}{\sectionprefix \thesection}{1pt}{}[.]

%longueur des sauts de paragraphe
\setlength{\parskip}{1ex}

%commande pour les ensembles
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}

%commande pour les notations de map
	%\newcommand{\I}{\mathds{1}}
	%\newcommand{\p}{\mathds{P}}
	%\newcommand{\E}{\mathds{E}}
	%\renewcommand{\P}{\mathds{P}}


%commande pour les opérateurs
\newcommand{\INT}{\displaystyle\int}
\newcommand{\SUM}{\displaystyle\sum}
\newcommand{\FRAC}{\displaystyle\frac}
\newcommand{\PROD}{\displaystyle\prod}
\newcommand{\INF}{\displaystyle\inf}

%commande pour environnement description
\newcommand{\desc}[1]{\item[] \texttt{#1}}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\begin{document}

\input{une}

\tableofcontents

\section{NetProbes : un programme de diagnostic réseau distribué}


\section{Guide de l'utilisateur}
\subsection{Prérequis}
\begin{description}
\item[Python3] l'interpréteur python est requis. Nous avons développé notre application pour la version 3.3.
\item[Connexion http] une connexion http entre les sondes est requise afin de permettre la synchronisation autour des tests et les opération de construction du réseau de sonde.
\end{description}
\subsection{Installation}
\begin{enumerate}
\item Décompresser l'archive dans un dossier de son choix.
\item Se placer dans le dossier voulu : commander ou probe et lancer les exécutables python main.py :
\end{enumerate}
\subsection{Manuel d'utilisation}
\subsubsection{Options au lancement}
Les options pour les différents programme sont donnés par l'option -h à l'invocation du main : python main.py -h.
Ceci est valable pour les deux exécutables que nous fournissons.
\subsubsection{Sondes : package probe}
L'utilisation des sondes est transparente et autonome. Les commandes d'ajout/suppression et de test étant effectuées par l'interface utilisateur.

La sonde est par défaut verbeuse, à moins de spécifier --no-debug lors de son lancement.

On peut lui spécifier un identifiant de son choix avec l'option -id.

Pour quitter la sonde, la solution implémentée est d'utiliser Ctrl+C.

\subsubsection{Interface utilisateur : package commander}
L'interface permet de commander une sonde de son choix. On peut choisir l'ip de cette sonde au démarrage avec l'option -ip.

Un fois la connexion établie, on obtient l'affichage suivant :
\begin{figure}
\begin{minipage}[c]{0.5\linewidth}
\centering\includegraphics[width=\linewidth]{img/commander.png}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\begin{description}
\item[ligne d'entrée] permet de donner des commandes à la sonde
\item[ligne de statut] permet d'afficher le status de la commande exécutée
\item[bouton rafraichir] permet de rafraichir les sondes connues en les demandant au serveur commandé
\item[affichage des sondes] tableau id | ip des sondes connues
\item[panneau résultats] affiche les résultats des tests lancés
\end{description}
\end{minipage}
\end{figure}
\FloatBarrier
Les commandes supportés sont les suivantes :
\begin{description}
\item[add ip] ajoute la sonde d'adresse ip 'ip' à notre réseau de sondes. On peut ensuite effectuer des tests dessus.
\item[remove id] supprime la sonde id du réseau. Supprimer la sonde commandée permet de la retirer du réseau.
\item[do testname testoptions] effectue le test 'testname' sur la sonde commandée avec les options testoptions. Les options sont de la forme option=valeur.
\end{description}
\vspace{2ex}
\textbf{Affichage des résultats}

Les résultats sont automatiquement affichés lorsqu'ils sont disponibles sur la sonde commandée dans le panneau prévu à cet effet.



%\newpage
%appendice éventuel
%\clearpage
%\rhead{Annexe}
%\renewcommand{\appendixpagename}{\centering{Annexe : Liste des fonctions Scilab}}
%\renewcommand{\labelitemi}{$\bullet$}
%\renewcommand{\labelitemiii}{$\cdot$}
%\renewcommand{\labelitemii}{$\diamond$}
%\renewcommand{\labelitemiv}{$\ast$}
%\begin{appendices}
%\end{appendices}
\end{document}
